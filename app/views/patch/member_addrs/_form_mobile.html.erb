
<%=javascript_include_tag "area_seletor"%>
<%=javascript_include_tag "patch/member_addrs"%>

<div class="member_addrs">
  <%=form_for :addr, :url=>@method == :put ? @action_url : member_addrs_path, :remote=>true,:method=>@method||:post,:html=>{ :class=> " form-horizontal" } do |f|%>
     <% if params[:return_url]%>
          <input type="hidden" name="return_url" value="<%=@return_url%>">
      <%else%>

      <input type="hidden" name="return_url" value="/member_addrs?platform=mobile">
          <%end%>
      <br/>
      <div class="am-input-group">
        <span class="am-input-group-label"><%=I18n.t "name"%></span>
        <input class="am-form-field" id="addr_name" name="addr[name]" placeholder="<%=I18n.t "name"%>"value="<%=@addr.name%>">


      </div>
      <br/>
      <div class="am-input-group">
        <span class="am-input-group-label"><%=I18n.t "m_phone"%></i></span>
        <input class="am-form-field" id="addr_mobile" name="addr[mobile]" placeholder="<%=I18n.t "m_phone"%>" value="<%=@addr.mobile%>">


      </div>
      <br/>
      <div class="am-input-group">
        <span class="am-input-group-label"><%=I18n.t "tel"%></span>
        <input class="am-form-field" id="addr_tel" name="addr[tel]" placeholder="<%=I18n.t "tel"%>" value="<%=@addr.tel%>">


      </div>
      <br/>
      <div class="am-input-group">
        <span class="am-input-group-label"><%= I18n.t "province"%></span>

        <%=f.select :province,Ecstore::Region.provinces.collect{|p| [p.local_name,p.region_id] } ,{:include_blank=>"请选择省" },{ :onchange=>"selectProvince(this,'#city','#district');",:id=>"province" ,:class=>"am-input-group-label"}%>
      </div>
      <br/>
      <div class="am-input-group">
        <span class="am-input-group-label"><%= I18n.t "city"%></span>

        <%if @addr&&@addr.city%>
            <%=f.select :city,Ecstore::Region.cities_of(@addr.province).collect{|p| [p.local_name,p.region_id] },{:include_blank=>"请选择市"},{ :onchange=>"selectCity(this,'#district');",:id=>"city" ,:class=>"am-input-group-label" }%>
        <%else%>
            <%=f.select :city, {}, { :include_blank=>"请选择市" }, { :onchange=>"selectCity(this,'#district');",:id=>"city",:class=>"am-input-group-label" }%>
        <%end%>    </div>
      <br/>
      <div class="am-input-group">
        <span class="am-input-group-label"><%= I18n.t "area"%></span>

        <%unless @addr&&@addr.new_record?%>
            <%=f.select :district,Ecstore::Region.districts_of(@addr&&@addr.city).collect{|p| [p.local_name,p.region_id] },{:include_blank=>"请选择区/县" },{ :onchange=>"selectDistrict(this);",:id=>"district" ,:class=>"am-input-group-label",:style=>"#{'display:none;' if @addr.district.blank? }" } %>
        <%else%>
            <%=f.select :district, {}, { :include_blank=>"请选择区/县" }, { :onchange=>"selectDistrict(this);",:id=>"district" }%>
        <%end%>   </div>
      <br/>
      <div class="am-input-group">
        <span class="am-input-group-label"><%= I18n.t "express_code"%></span>
        <input class="am-form-field" id="addr_zip" name="addr[zip]" placeholder="<%=I18n.t "express_code"%>" size="30" type="text">

      </div>
      <br/>
      <div class="">
        <span class=""><%= I18n.t "address_detail"%></span>

        <%=f.text_area :addr, :id=>"addr", :cols=>"0",:rows=>"0"%>
        <span class="help-inline error"></span>
      </div>

      <dl class="connerbox" style="display:none"><dd><span> <%=f.label :def_addr, "设置为默认地址：",:class=>"text_input"%></span>
        <span class="form_td"><input name="addr[def_addr]" type="hidden" value="1" checked="true" /></span>
      </dd></dl>
      <br/>
      <div class="ui-btn-area">
        <%if @method == :put%>
            <input type="submit" class="am-btn am-btn-warning am-btn-block " value="<%=I18n.t "confirm"%>">

        <%else%>
            <input type="submit" class="am-btn  am-btn-warning am-btn-block  " value="<%=I18n.t "confirm"%>">

        <%end%>
      </div>

  <%end%>
</div>
